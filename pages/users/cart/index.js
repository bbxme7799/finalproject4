import React, { useState } from "react";
import CartProduct from "../../../components/cart/CartProduct";
import SubTotal from "../../../components/cart/SubTotal";
import CheckoutButton from "../../../components/cart/CheckoutButton";
import Layout from "@/components/layout/layout";
import axios from "axios";

export const getServerSideProps = async (context) => {
  const me = await axios
    .get("http://localhost:8000/api/users/me", {
      headers: { cookie: context.req.headers.cookie },
      withCredentials: true,
    })
    .then((response) => response.data)
    .catch(() => null);

  console.log("user/me info => ", me);
  if (!me) {
    return {
      redirect: {
        destination: "/users/signin",
        permanent: false,
      },
    };
  }
  return {
    props: {
      me,
    },
  };
};

const CartPage = ({ me }) => {
  const [isOpen, setIsOpen] = useState(false);

  const handleSidebarToggle = () => {
    setIsOpen((prev) => !prev);
  };

  // Sample data for demonstration purposes
  const products = [
    {
      service: 17993,
      category: "YouTube Views - ЁЭРНЁЭРЪЁЭРнЁЭРвЁЭРпЁЭРЮ ЁЭРАЁЭРЭЁЭР░ЁЭРиЁЭРлЁЭРЭЁЭРмтЪбя╕ПReal Advertisement тЬЕЁЯУЕ",
      name: "Youtube Native Ads Views | 100% Real Advertisement | Start: 0-24H | Speed: 5M/D | р╕Вр╕▒р╣Йр╕Щр╕Хр╣Ир╕│: 10K",
      description:
        'тЩ╗я╕П р╕гр╕░р╕вр╕░р╣Ар╕зр╕ер╕▓р╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ: 30 р╕зр╕▒р╕Щ 80% р╕Ыр╕гр╕┤р╕бр╕▓р╕У &gt; 10K\r\n\r\nЁЯФЧ р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕ер╕┤р╕Зр╕Бр╣М: https://www.youtube.com/watch?v=xxxxxxxxx , https://youtu.be/xxxxxxxxx\r\nтМЫ р╣Ар╕гр╕┤р╣Ир╕бр╕Чр╕│р╕Зр╕▓р╕Щ: 0 - 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З\r\nтЪбя╕П р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕з: ~5M / 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З (р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╕Ьр╕▒р╕Щр╕Ьр╕зр╕Щр╕Хр╕▓р╕бр╕Ыр╕гр╕┤р╕бр╕▓р╕Ур╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ ~100K+ / р╕зр╕▒р╕Щ)\r\nЁЯТО р╕Др╕╕р╕Ур╕ар╕▓р╕Ю: 100% Real Views Through Real Advertisement.\r\nЁЯТж р╕нр╕▒р╕Хр╕гр╕▓р╕ер╕Фр╕ер╕З: No Drop - Low\r\nтЬЕ р╕зр╕┤р╕Фр╕╡р╣Вр╕нр╕Ир╕░р╕Цр╕╣р╕Бр╣Вр╕Жр╕йр╕Ур╕▓р╕Ър╕Щр╣Др╕Лр╕Хр╣Мр╣Бр╕Юр╕ер╕Хр╕Яр╕нр╕гр╣Мр╕бр╣Вр╕Лр╣Ар╕Кр╕╡р╕вр╕е р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕г р╣Др╕Лр╕Хр╣Мр╕Вр╣Ир╕▓р╕з р╣Бр╕ер╕░р╣Др╕Лр╕Хр╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╕Кр╕бр╕кр╕╣р╕З\r\nтЬЕ р╣Вр╕Жр╕йр╕Ур╕▓ Native р╕Щр╕╡р╣Йр╣Ар╕лр╕бр╕╖р╕нр╕Щр╕Бр╕▒р╕Ър╣Вр╕Жр╕йр╕Ур╕▓ Discovery р╕Вр╕нр╕З YouTube\r\n&nbsp;\r\nЁЯФТ р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:\r\n\r\nЁЯУМ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕ер╕┤р╕Зр╕Др╣Мр╕нр╕вр╣Ир╕▓р╕Зр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╣Ир╕нр╕Щр╕Чр╕│р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н\r\nЁЯУМ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕лр╣Йр╣Бр╕Щр╣Ир╣Гр╕Ир╕зр╣Ир╕▓р╕ер╕┤р╕Зр╕Бр╣Мр╕лр╕гр╕╖р╕нр╕Ър╕▒р╕Нр╕Кр╕╡р╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Ар╕Ыр╣Зр╕Щр╣Бр╕Ър╕Ър╕кр╕▓р╕Шр╕▓р╕гр╕Ур╕░ р╣Др╕бр╣Ир╣Ар╕Ыр╣Зр╕Щр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з\r\nЁЯУМ р╣Ар╕зр╕ер╕▓р╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Бр╕ер╕░р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕Фр╣Йр╕Хр╕ер╕нр╕Фр╣Ар╕зр╕ер╕▓ р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕лр╕Щр╕▓р╣Бр╕Щр╣Ир╕Щр╕лр╕гр╕╖р╕нр╕бр╕╡р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Ир╕▓р╕Бр╣Вр╕Лр╣Ар╕Кр╕╡р╕вр╕ер╕бр╕╡р╣Ар╕Фр╕╡р╕в\r\nтЪая╕П р╣Ар╕гр╕▓р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕вр╕Бр╣Ар╕ер╕┤р╕Бр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╣Ар╕бр╕╖р╣Ир╕нр╕кр╣Ир╕Зр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Бр╕ер╣Йр╕з\r\nтЪая╕П р╕нр╕вр╣Ир╕▓р╣Гр╕кр╣Ир╕лр╕ер╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕┤р╕Зр╕Др╣Мр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ р╕Бр╣Ир╕нр╕Щр╕Чр╕╡р╣Ир╕Ир╕░р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ\r\nтЪая╕П р╕Цр╣Йр╕▓р╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕бр╕╡р╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ р╣Ар╕гр╕▓р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Хр╕┤р╕бр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕лр╕▓р╕Бр╕Бр╕▓р╕гр╕ер╕Фр╕ер╕Зр╕Хр╣Ир╕│р╕Бр╕зр╣Ир╕▓р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ\r\nтЪая╕П р╕лр╕▓р╕Бр╕ер╕┤р╕Зр╕Др╣Мр╕Цр╕╣р╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕Ы р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Ир╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щр╕кр╕Цр╕▓р╕Щр╕░ "р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ" р╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╕Ир╕░р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ\r\n',
      min: 10000,
      max: 500000000,
      step: 10000,
      rate: "106.80309",
      type: "Default",
      average_delivery: "",
      dripfeed: true,
      refill: false,
      url: "https://www.youtube.com/watch?v=xxxxxxxxx",
    },
    {
      service: 17993,
      category: "YouTube Views - ЁЭРНЁЭРЪЁЭРнЁЭРвЁЭРпЁЭРЮ ЁЭРАЁЭРЭЁЭР░ЁЭРиЁЭРлЁЭРЭЁЭРмтЪбя╕ПReal Advertisement тЬЕЁЯУЕ",
      name: "Youtube Native Ads Views | 100% Real Advertisement | Start: 0-24H | Speed: 5M/D | р╕Вр╕▒р╣Йр╕Щр╕Хр╣Ир╕│: 10K",
      description:
        'тЩ╗я╕П р╕гр╕░р╕вр╕░р╣Ар╕зр╕ер╕▓р╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ: 30 р╕зр╕▒р╕Щ 80% р╕Ыр╕гр╕┤р╕бр╕▓р╕У &gt; 10K\r\n\r\nЁЯФЧ р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕ер╕┤р╕Зр╕Бр╣М: https://www.youtube.com/watch?v=xxxxxxxxx , https://youtu.be/xxxxxxxxx\r\nтМЫ р╣Ар╕гр╕┤р╣Ир╕бр╕Чр╕│р╕Зр╕▓р╕Щ: 0 - 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З\r\nтЪбя╕П р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕з: ~5M / 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З (р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╕Ьр╕▒р╕Щр╕Ьр╕зр╕Щр╕Хр╕▓р╕бр╕Ыр╕гр╕┤р╕бр╕▓р╕Ур╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ ~100K+ / р╕зр╕▒р╕Щ)\r\nЁЯТО р╕Др╕╕р╕Ур╕ар╕▓р╕Ю: 100% Real Views Through Real Advertisement.\r\nЁЯТж р╕нр╕▒р╕Хр╕гр╕▓р╕ер╕Фр╕ер╕З: No Drop - Low\r\nтЬЕ р╕зр╕┤р╕Фр╕╡р╣Вр╕нр╕Ир╕░р╕Цр╕╣р╕Бр╣Вр╕Жр╕йр╕Ур╕▓р╕Ър╕Щр╣Др╕Лр╕Хр╣Мр╣Бр╕Юр╕ер╕Хр╕Яр╕нр╕гр╣Мр╕бр╣Вр╕Лр╣Ар╕Кр╕╡р╕вр╕е р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕г р╣Др╕Лр╕Хр╣Мр╕Вр╣Ир╕▓р╕з р╣Бр╕ер╕░р╣Др╕Лр╕Хр╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╕Кр╕бр╕кр╕╣р╕З\r\nтЬЕ р╣Вр╕Жр╕йр╕Ур╕▓ Native р╕Щр╕╡р╣Йр╣Ар╕лр╕бр╕╖р╕нр╕Щр╕Бр╕▒р╕Ър╣Вр╕Жр╕йр╕Ур╕▓ Discovery р╕Вр╕нр╕З YouTube\r\n&nbsp;\r\nЁЯФТ р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:\r\n\r\nЁЯУМ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕ер╕┤р╕Зр╕Др╣Мр╕нр╕вр╣Ир╕▓р╕Зр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╣Ир╕нр╕Щр╕Чр╕│р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н\r\nЁЯУМ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕лр╣Йр╣Бр╕Щр╣Ир╣Гр╕Ир╕зр╣Ир╕▓р╕ер╕┤р╕Зр╕Бр╣Мр╕лр╕гр╕╖р╕нр╕Ър╕▒р╕Нр╕Кр╕╡р╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Ар╕Ыр╣Зр╕Щр╣Бр╕Ър╕Ър╕кр╕▓р╕Шр╕▓р╕гр╕Ур╕░ р╣Др╕бр╣Ир╣Ар╕Ыр╣Зр╕Щр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з\r\nЁЯУМ р╣Ар╕зр╕ер╕▓р╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Бр╕ер╕░р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕Фр╣Йр╕Хр╕ер╕нр╕Фр╣Ар╕зр╕ер╕▓ р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕лр╕Щр╕▓р╣Бр╕Щр╣Ир╕Щр╕лр╕гр╕╖р╕нр╕бр╕╡р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Ир╕▓р╕Бр╣Вр╕Лр╣Ар╕Кр╕╡р╕вр╕ер╕бр╕╡р╣Ар╕Фр╕╡р╕в\r\nтЪая╕П р╣Ар╕гр╕▓р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕вр╕Бр╣Ар╕ер╕┤р╕Бр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╣Ар╕бр╕╖р╣Ир╕нр╕кр╣Ир╕Зр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Бр╕ер╣Йр╕з\r\nтЪая╕П р╕нр╕вр╣Ир╕▓р╣Гр╕кр╣Ир╕лр╕ер╕▓р╕вр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕┤р╕Зр╕Др╣Мр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ р╕Бр╣Ир╕нр╕Щр╕Чр╕╡р╣Ир╕Ир╕░р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ\r\nтЪая╕П р╕Цр╣Йр╕▓р╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕бр╕╡р╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ р╣Ар╕гр╕▓р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Хр╕┤р╕бр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕лр╕▓р╕Бр╕Бр╕▓р╕гр╕ер╕Фр╕ер╕Зр╕Хр╣Ир╕│р╕Бр╕зр╣Ир╕▓р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ\r\nтЪая╕П р╕лр╕▓р╕Бр╕ер╕┤р╕Зр╕Др╣Мр╕Цр╕╣р╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕Ы р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Ир╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щр╕кр╕Цр╕▓р╕Щр╕░ "р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ" р╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╕Ир╕░р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щ\r\n',
      min: 10000,
      max: 500000000,
      step: 10000,
      rate: "106.80309",
      type: "Default",
      average_delivery: "",
      dripfeed: true,
      refill: false,
      url: "https://www.youtube.com/watch?v=xxxxxxxxx",
    },
  ];

  return (
    <>
      <Layout me={me}></Layout>
      <div className="ml-[255px] mt-[65px]">
        <div className="bg-white my-2">
          <div className="flex mx-2 py-2">
            <h1 className="font-bold text-lg">Cart :</h1>
            <p className="text-lg pl-2">р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓</p>
          </div>
        </div>
      </div>
      <section className="py-8 md:py-12 lg:py-16 bg-gray-50">
        <div className="px-4 mx-auto sm:px-6 lg:px-8 max-w-xl">
          <div className="flex items-center justify-between md:flex-row">
            <h1 className="text-base md:text-xl lg:text-2xl font-bold text-gray-900">
              Shopping Cart
            </h1>
            {/* <span className="mt-2 md:mt-0 px-2 py-1 text-xs md:text-sm font-bold tracking-widest uppercase bg-gray-400 rounded-full rounded-r-none text-gray-50">
              4 Items
            </span> */}
          </div>

          <div className="max-w-3xl mx-auto mt-8 md:mt-12">
            <div className="overflow-hidden bg-white shadow rounded-xl">
              <div className="px-4 py-6 sm:px-8 sm:py-10">
                <div className="flow-root">
                  <ul className="divide-y divide-gray-200 -my-4 md:-my-7">
                    {products.map((product) => (
                      <CartProduct key={product.service} product={product} />
                    ))}
                  </ul>
                </div>

                <hr className="border-gray-200 my-4 md:my-7" />

                <SubTotal total={699} />

                <div className="mt-6 text-center">
                  <CheckoutButton />
                  {/* <p className="mt-4 md:mt-6 text-xs md:text-sm font-normal text-gray-500">
                    All the taxes will be calculated while checkout
                  </p> */}
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </>
  );
};

export default CartPage;
